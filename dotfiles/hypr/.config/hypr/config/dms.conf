# --- dms shell bindings ---

# Autostarts
exec-once = ~/.config/hypr/scripts/reload_bar.sh
exec-once = dsearch serve

# Hard-override any earlier bindings for these combos
unbind = ALT, SPACE
unbind = $mainMod, COMMA
unbind = , XF86AudioRaiseVolume
unbind = , XF86AudioLowerVolume
unbind = , XF86AudioMute
unbind = , XF86AudioMicMute
unbind = , XF86MonBrightnessUp
unbind = , XF86MonBrightnessDown
unbind = $mainMod, N
unbind = $mainMod SHIFT, B
unbind = $mainMod ALT, W
unbind = $mainMod, A
unbind = $mainMod, V
unbind = $mainMod, ESCAPE
unbind = $mainMod, PERIOD
unbind = ALT, F4
unbind = $mainMod, SLASH
unbind = , PRINT
unbind = SHIFT, PRINT
unbind = $mainMod SHIFT CTRL, P
unbind = CTRL ALT, DELETE
unbind = CTRL SHIFT, F5

# Spotlight
bind = ALT, SPACE, exec, dms ipc call spotlight toggle

# Shell settings
bind = $mainMod, COMMA, exec, dms ipc call settings toggle

# Audio (allow-when-locked=true -> use bindl)
bindl = , XF86AudioRaiseVolume, exec, dms ipc call audio increment 5
bindl = , XF86AudioLowerVolume, exec, dms ipc call audio decrement 5
bindl = , XF86AudioMute, exec, dms ipc call audio mute
bindl = , XF86AudioMicMute, exec, dms ipc call audio micmute

# Backlight (allow-when-locked=true -> use bindl)
bindl = , XF86MonBrightnessUp, exec, dms ipc call brightness increment 5 backlight:intel_backlight
bindl = , XF86MonBrightnessDown, exec, dms ipc call brightness decrement 5 backlight:intel_backlight

# dms toggles
bind = $mainMod, N, exec, dms ipc call notifications toggle
bind = $mainMod SHIFT, B, exec, dms ipc call dock toggleAutoHide
bind = $mainMod ALT, W, exec, dms ipc call dash toggle wallpaper
bind = $mainMod, A, exec, dms ipc call control-center toggle
bind = $mainMod, V, exec, dms ipc call clipboard toggle
bind = $mainMod, ESCAPE, exec, dms ipc call lock lock
bind = $mainMod, PERIOD, exec, dms ipc call spotlight toggleQuery :
bind = ALT, F4, exec, dms ipc call powermenu toggle
bind = $mainMod, SLASH, exec, dms ipc call keybinds toggle niri

# Screenshot
bind = , PRINT, exec, dms screenshot
bind = SHIFT, PRINT, exec, dms screenshot full

# Color picker
bind = $mainMod SHIFT CTRL, P, exec, dms color pick -a

# Task Manager
bind = CTRL ALT, DELETE, exec, dms ipc call processlist toggle

# toggle_app.sh
bind = CTRL SHIFT, F5, exec, ~/.config/hypr/scripts/toggle_app.sh "dgop" "kitty --override confirm_os_window_close=0 --class dgop --title dgop dgop"

# Windowrules for dgop
$dgop_class = ^(dgop)$
windowrule {
  name = dgop
  match:class = $dgop_class
  center = on
  float = on
  size = (monitor_w*0.8) (monitor_h*0.8)
}

# Windowrules for dms settings
windowrule {
  name = dms-settings
  match:class = org.quickshell
  match:title = Settings
  center = on
  float = on
  size = (monitor_w*0.6) (monitor_h*0.8)
}

# Layerrules
layerrule {
  name = dms
  match:namespace = dms:.*
  blur = on
  ignore_alpha = 0.2
}

