# Here I configure different plugins.

plugin {

  # Hyprspace
  overview {
    showSpecialWorkspace = true
    panelHeight = 120

  }

  # Hyprgrass
  touch_gestures {
    sensitivity = 4.0
    hyprgrass-bind = , swipe:3:d, overview:toggle
    hyprgrass-bind = , swipe:4:u, exec, ~/.config/rofi/launcher/run.sh
    hyprgrass-bind = , swipe:4:d, exec, pkill rofi
  }

  hyprexpo {
    columns = 3
    gap_size = 5
    bg_col = $primary_container
    workspace_method = first 1 # [center/first] [workspace] e.g. first 1 or center m+1
    skip_empty = false
    gesture_distance = 300 # how far is the "max" for the gesture
  }

  hyprbars {
    # See https://github.com/hyprwm/hyprland-plugins/tree/main/hyprbars
    enabled = false

    # example config
    bar_height = 15
    bar_blur = true
    # bar_color = $secondary_container_transparent
    bar_title_enabled = true
    col.text = $primary
    bar_buttons_alignment = left
    bar_text_size = 10
    bar_text_font = CaskaydiaCove Nerd Font Propo
    icon_on_hover = true
    bar_part_of_window = true # to get shadow around the bar
    bar_precedence_over_border = false # bar outside the border
    bar_padding = 5
    bar_button_padding = 2
    inactive_button_color = $secondary

    # example buttons (R -> L)
    # hyprbars-button = color, size, on-click
    hyprbars-button = $red_value,10, , hyprctl dispatch killactive, $white_value
    hyprbars-button = $green_value, 10, , hyprctl dispatch fullscreen 1, $white_value
    hyprbars-button = $yellow_value, 10, , hyprctl dispatch movetoworkspace special:scratchpad;hyprctl dispatch togglespecialworkspace scratchpad, $white_value


    # cmd to run on double click of the bar
    on_double_click = hyprctl dispatch fullscreen 1
  }

  hyprfocus {
    mode = flash
    fade_opacity = 0.8 # What opacity should the window blinp in flash mode
    bounce_strength = 0.95 # How much small should the window get in bounce mode
    slide_height = 10 # Number of pixels in slide mode
  }

  dynamic-cursors {
    enabled = false
    mode = none

    # See https://wayland.app/protocols/cursor-shape-v1#wp_cursor_shape_device_v1:enum:shape
    shaperule = clientside, rotate:offset: 90

    # configure shake to find
    # magnifies the cursor if its is being shaken
    shake {
      # See https://github.com/VirtCode/hypr-dynamic-cursors

      # enables shake to find
      enabled = true

      # use nearest-neighbour (pixelated) scaling when shaking
      # may look weird when effects are enabled
      nearest = true

      # controls how soon a shake is detected
      # lower values mean sooner
      threshold = 4.0

      # magnification level immediately after shake start
      base = 1.2
      # magnification increase per second when continuing to shake
      speed = 3.0
      # how much the speed is influenced by the current shake intensitiy
      influence = 2.0

      # maximal magnification the cursor can reach
      # values below 1 disable the limit (e.g. 0)
      limit = 10

      # time in millseconds the cursor will stay magnified after a shake has ended
      timeout = 2000

      # show cursor behaviour `tilt`, `rotate`, etc. while shaking
      effects = false

      # enable ipc events for shake
      # see the `ipc` section below
      ipc = false
    }

    # use hyprcursor to get a higher resolution texture when the cursor is magnified
    # see the `hyprcursor` section below
    hyprcursor {

        # use nearest-neighbour (pixelated) scaling when magnifing beyond texture size
        # this will also have effect without hyprcursor support being enabled
        # 0 / false - never use pixelated scaling
        # 1 / true  - use pixelated when no highres image
        # 2         - always use pixleated scaling
        nearest = 0

        # enable dedicated hyprcursor support
        enabled = true

        # resolution in pixels to load the magnified shapes at
        # be warned that loading a very high-resolution image will take a long time and might impact memory consumption
        # -1 means we use [normal cursor size] * [shake:base option]
        resolution = -1

        # shape to use when clientside cursors are being magnified
        # see the shape-name property of shape rules for possible names
        # specifying clientside will use the actual shape, but will be pixelated
        fallback = clientside
    }
  }

  hyprscrolling {
    # See https://github.com/hyprwm/hyprland-plugins/tree/main/hyprscrolling
    column_width = 0.5
    fullscreen_on_one_column = true
    focus_fit_method = 1
    follow_focus = true
  }

  easymotion {
    textsize = 25
    textcolor = $primary
    bgcolor = rgba(00000022)
    blur = 1
    blurA = 0.7
    textfont = CaskaydiaCove Nerd Font Propo
    textpadding = 5
    bordersize = 2
    bordercolor = $primary_container
    rounding = 1
    fullscreen_action = maximize
    only_special = true
  }

  hy3 {
    # disable gaps when only one window is onscreen
    # 0 - always show gaps
    # 1 - hide gaps with a single window onscreen
    # 2 - 1 but also show the window border
    no_gaps_when_only = 0

    # policy controlling what happens when a node is removed from a group,
    # leaving only a group
    # 0 = remove the nested group
    # 1 = keep the nested group
    # 2 = keep the nested group only if its parent is a tab group
    node_collapse_policy = 2 # default: 2
    # It works when removing some windows which leads to only one group

    # offset from group split direction when only one window is in a group
    group_inset = 20 # This is for vertical and horizontal groups

    # if a tab group will automatically be created for the first window spawned in a workspace
    tab_first_window = false

     # tab group settings
    tabs {
      # height of the tab bar
      height = 15
      # padding between the tab bar and its focused node
      padding = 2 # default: 6

      # the tab bar should animate in/out from the top instead of below the window
      from_top = false # default: false

      # radius of tab bar corners
      radius = 6 # default: 6

      # tab bar border width
      border_width = 1 # default: 2

      # render the window title on the bar
      render_text = true # default: true

      # center the window title
      text_center = true # default: true

      # font to render the window title with
      text_font = CaskaydiaCove Nerd Font Propo Bold # default: Sans

      # height of the window title
      text_height = 8 # default: 8

      # left padding of the window title
      text_padding = 2 # default: 3

      # active tab bar segment colors
      col.active = $primary # default: rgba(33ccff40)
      col.active.border = $primary_container # default: rgba(33ccffee)
      col.active.text = $on_primary # default: rgba(ffffffff)

      # active tab bar segment colors for bars on an unfocused monitor
      col.active_alt_monitor = $tertiary_transparent # default: rgba(60606040)
      col.active_alt_monitor.border = $tertiary_container_transparent # default: rgba(808080ee)
      col.active_alt_monitor.text = $on_tertiary # default: rgba(ffffffff)

      # focused tab bar segment colors (focused node in unfocused container)
      col.focused = $tertiary_transparent # default: rgba(60606040)
      col.focused.border = $tertiary_container_transparent # default: rgba(808080ee)
      col.focused.text = $on_tertiary # default: rgba(ffffffff)

      # inactive tab bar segment colors
      col.inactive = $secondary_container_transparent # default: rgba(30303020)
      col.inactive.border = $secondary_transparent # default: rgba(606060aa)
      col.inactive.text = $on_secondary_container # default: rgba(ffffffff)

      # urgent tab bar segment colors
      col.urgent = $secondary_transparent # default: rgba(ff223340)
      col.urgent.border = $secondary_container_transparent # default: rgba(ff2233ee)
      col.urgent.text = $on_secondary # default: rgba(ffffffff)

      # urgent tab bar segment colors
      col.locked = $yellow_transparent # default: rgba(90903340)
      col.locked.border = $yellow_container_transparent # default: rgba(909033ee)
      col.locked.text = $on_yellow # default: rgba(ffffffff)

      # if tab backgrounds should be blurred
      # Blur is only visible when the above colors are not opaque.
      blur = true # default: true

      # opacity multiplier for tabs
      # Applies to blur as well as the given colors.
      opacity = 0.8 # default: 1.0
    }

    # autotiling settings
    autotile {
      # enable autotile
      enable = true # default: false

      # make autotile-created groups ephemeral
      ephemeral_groups = true # default: true

      # if a window would be squished smaller than this width, a vertical split will be created
      # -1 = never automatically split vertically
      # 0 = always automatically split vertically
      # <number> = pixel width to split at
      trigger_width = 400 # default: 0

      # if a window would be squished smaller than this height, a horizontal split will be created
      # -1 = never automatically split horizontally
      # 0 = always automatically split horizontally
      # <number> = pixel height to split at
      trigger_height = 400 # default: 0

      # a space or comma separated list of workspace ids where autotile should be enabled
      # it's possible to create an exception rule by prefixing the definition with "not:"
      # workspaces = 1,2 # autotiling will only be enabled on workspaces 1 and 2
      # workspaces = not:1,2 # autotiling will be enabled on all workspaces except 1 and 2
      workspaces = 1,2,3 # default: all
    }
  }
}

